function _fadeIn(a) {
  var b = 0.1;
  (a.style.opacity = b), (a.style.display = "block");
  var c = setInterval(function () {
    b >= 1 && clearInterval(c), (a.style.opacity = b), (b += 0.1 * b);
  }, 15);
}
function _fadeOut(a) {
  var b = 1,
    c = setInterval(function () {
      b <= 0.1 && (clearInterval(c), (a.style.display = "none")),
        (a.style.opacity = b),
        (b -= 0.1 * b);
    }, 15);
}
const ymap = () => {
    let b = document.querySelector(".map");
    function c() {
      "undefined" != typeof ymaps &&
        ymaps.ready(function () {
          let a = new ymaps.Map("ymap", {
              center: [43.58272357456786, 39.76034150000001],
              zoom: 19,
              controls: ["zoomControl"],
              behaviors: ["drag"],
            }),
            b = new ymaps.Placemark(
              [43.58272357456786, 39.76034150000001],
              {
                hintContent: "Net Asset",
                balloonContent:
                  "\u0433. \u0421\u043E\u0447\u0438, \u0443\u043B. \u0412\u043E\u0434\u043E\u0440\u0430\u0437\u0434\u0435\u043B\u044C\u043D\u0430\u044F, \u0434. 5/1",
              },
              {
                iconLayout: "default#image",
                iconImageHref: "img/marker.svg",
                iconImageSize: [80, 80],
                iconImageOffset: [-35, -35],
              }
            );
          a.geoObjects.add(b);
        });
    }
    function a() {
      let e = b.getBoundingClientRect().top,
        c = window.pageYOffset;
      c + window.innerHeight > e + c &&
        (d(), window.removeEventListener("scroll", a));
    }
    function d() {
      let a = document.createElement("script");
      (a.src = "https://api-maps.yandex.ru/2.1/?lang=ru_RU"),
        document.body.appendChild(a),
        (a.onload = c);
    }
    b && (window.addEventListener("scroll", a), a());
  },
  slider = () => {
    document.querySelector(".collaboration__slider") &&
      new Swiper(".collaboration__slider", {
        slidesPerView: 3.3,
        loop: !1,
        centeredSlides: !0,
        initialSlide: 1,
        spaceBetween: 24,
        speed: 600,
        navigation: {
          nextEl: ".collaboration__next",
          prevEl: ".collaboration__prev",
        },
        breakpoints: {
          320: { slidesPerView: 1, spaceBetween: 15, initialSlide: 0 },
          767: { slidesPerView: 2, spaceBetween: 16 },
          992: { slidesPerView: 3, spaceBetween: 16 },
          1600: { slidesPerView: 3.3, spaceBetween: 24, initialSlide: 1 },
        },
      });
  },
  lazyload = () => {
    let a = { root: null, rootMargin: "0px", threshold: 0.35 },
      c = new IntersectionObserver((a, b) => {
        let c = (a) => {
          let b = a.closest(".animation-wrapper"),
            c = b.querySelectorAll(".animation-child"),
            d = 0,
            e = setInterval(() => {
              d === c.length - 1 && clearInterval(e),
                c[d].classList.add("animation-child--animated"),
                d++;
            }, 500);
        };
        a.forEach((d) => {
          if (d.isIntersecting) {
            let a = d.target;
            a.dataset.src
              ? ((a.src = a.dataset.src), a.removeAttribute("data-src"))
              : a.dataset.srcset &&
                ((a.srcset = a.dataset.srcset),
                a.removeAttribute("data-srcset")),
              (a.onload = () => {
                let b = a.closest(".lazy-wrapper");
                a.classList.add("lazy-image--loaded"),
                  b.classList.add("lazy-wrapper--loaded"),
                  a.classList.contains("animation-trigger") && c(a);
              }),
              b.unobserve(a);
          }
        });
      }, a),
      b = document.querySelectorAll("img[data-src], source[data-srcset]");
    b.forEach((a) => c.observe(a));
  },
  isWebp = () => {
    function a(b) {
      var a = new Image();
      (a.onload = a.onerror =
        function () {
          b(2 == a.height);
        }),
        (a.src =
          "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA");
    }
    a(function (a) {
      !0 == a
        ? document.querySelector("body").classList.add("webp")
        : document.querySelector("body").classList.add("no-webp");
    });
  },
  checkDownloadRadios = () => {
    let b = document.querySelector(".popup-download");
    if (b) {
      let c = document.querySelectorAll(".radio-form input"),
        d = b.querySelector(".popup-download__item_mail"),
        f = d.querySelector("input");
      for (let a = 0; a < c.length; a++) {
        let e = c[a];
        e.addEventListener("change", () => {
          e.hasAttribute("data-mail")
            ? (d.style.display = "block")
            : ((f.value = ""), (d.style.display = "none"));
        });
      }
    }
  },
  phoneMask = () => {
    let b = document.querySelectorAll("input[data-tel-input]");
    for (let a of b)
      a.addEventListener("keydown", f),
        a.addEventListener("input", e, !1),
        a.addEventListener("paste", d, !1);
    function c(a) {
      return a.value.replace(/\D/g, "");
    }
    function d(a) {
      let b = a.target,
        e = c(b),
        d = a.clipboardData || window.clipboardData;
      if (d) {
        let f = d.getData("Text");
        if (/\D/g.test(f)) {
          b.value = e;
          return;
        }
      }
    }
    function e(e) {
      let b = e.target,
        a = c(b),
        f = b.selectionStart,
        d = "";
      if (!a) return (b.value = "");
      if (b.value.length != f) {
        e.data && /\D/g.test(e.data) && (b.value = a);
        return;
      }
      if (["7", "8", "9"].indexOf(a[0]) > -1) {
        "9" == a[0] && (a = "7" + a);
        let g = "8" == a[0] ? "8" : "+7";
        (d = b.value = g + " "),
          a.length > 1 && (d += "(" + a.substring(1, 4)),
          a.length >= 5 && (d += ") " + a.substring(4, 7)),
          a.length >= 8 && (d += "-" + a.substring(7, 9)),
          a.length >= 10 && (d += "-" + a.substring(9, 11));
      } else d = "+" + a.substring(0, 16);
      b.value = d;
    }
    function f(a) {
      let b = a.target.value.replace(/\D/g, "");
      8 == a.keyCode && 1 == b.length && (a.target.value = "");
    }
  },
  openInfo = () => {
    let a = document.querySelectorAll(".slide-collaboration__text_trigger");
    if (a.length > 0)
      for (let b = 0; b < a.length; b++) {
        let c = a[b];
        c.addEventListener("click", () => {
          let b = c.closest(".collaboration__slide"),
            a = b.querySelector(".slide-collaboration__list_spoiler");
          c.classList.contains("clicked")
            ? (_fadeOut(a), c.classList.remove("clicked"))
            : (_fadeIn(a), c.classList.add("clicked"));
        });
      }
  };
window.onload = () => {
  isWebp(),
    checkDownloadRadios(),
    slider(),
    openInfo(),
    ymap(),
    lazyload(),
    phoneMask();
  let a = document.querySelectorAll(".popup-link"),
    i = document.querySelector("body"),
    j = document.querySelectorAll(".lock-padding"),
    k = !0;
  if (a.length > 0)
    for (let b = 0; b < a.length; b++) {
      let g = a[b];
      g.addEventListener("click", function (a) {
        let b = g.getAttribute("href").replace("#", ""),
          c = document.getElementById(b);
        l(c), a.preventDefault();
      });
    }
  let c = document.querySelectorAll(".close-popup");
  if (c.length > 0)
    for (let d = 0; d < c.length; d++) {
      let h = c[d];
      h.addEventListener("click", function (a) {
        m(h.closest(".popup")), a.preventDefault();
      });
    }
  function l(a) {
    if (a && k) {
      let b = document.querySelector(".popup.open");
      b ? m(b, !1) : n(),
        a.classList.add("open"),
        a.addEventListener("click", function (a) {
          a.target.closest(".popup__content") || m(a.target.closest(".popup"));
        });
    }
  }
  function m(a, b = !0) {
    k && (a.classList.remove("open"), b && o());
  }
  function n() {
    let b =
      window.innerWidth - document.querySelector(".wrapper").offsetWidth + "px";
    if (j.length > 0)
      for (let a = 0; a < j.length; a++) {
        let c = j[a];
        c.style.paddingRight = b;
      }
    (i.style.paddingRight = b),
      i.classList.add("_lock"),
      (k = !1),
      setTimeout(function () {
        k = !0;
      }, 500);
  }
  function o() {
    setTimeout(function () {
      if (j.length > 0)
        for (let a = 0; a < j.length; a++) {
          let b = j[a];
          b.style.paddingRight = "0px";
        }
      (i.style.paddingRight = "0px"), i.classList.remove("_lock");
    }, 500),
      (k = !1),
      setTimeout(function () {
        k = !0;
      }, 500);
  }
  document.addEventListener("keydown", function (a) {
    if (27 === a.which) {
      let b = document.querySelector(".popup.open");
      m(b);
    }
  });
  let p = (a) => {
      a.classList.add("_error"), a.parentElement.classList.add("_error");
    },
    q = (a) => {
      a.classList.remove("_error"), a.parentElement.classList.remove("_error");
    },
    r = (a) => {
      let b =
        /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      return b.test(a.value);
    },
    f = document.querySelectorAll("form");
  for (var e = 0; e < f.length; e++)
    (form = f[e]).addEventListener("submit", s);
  async function s(c) {
    if ((c.preventDefault(), 0 === t(this))) {
      let a = document.querySelector(".popup-thanks"),
        b = a.querySelector(".popup-thanks__link");
      this.closest(".popup-download")
        ? (b.style.display = "inline-block")
        : (b.style.display = "none"),
        l(a);
    }
  }
  function t(e) {
    let b = 0,
      d = e.querySelectorAll("._req");
    for (var c = 0; c < d.length; c++) {
      let a = d[c],
        f = a.parentElement;
      q(a),
        "none" !== window.getComputedStyle(f).display &&
          (a.classList.contains("_email")
            ? !r(a) && (p(a), b++)
            : "" == a.value
            ? (p(a), b++)
            : "checkbox" === a.type && !a.checked && (p(a), b++));
    }
    return b;
  }
};
